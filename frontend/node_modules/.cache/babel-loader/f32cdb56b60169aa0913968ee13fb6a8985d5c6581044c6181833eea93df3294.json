{"ast":null,"code":"import { computed, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { House, User, Coin, Present, ShoppingCart, ArrowDown } from '@element-plus/icons-vue';\nexport default {\n  name: 'MemberLayout',\n  components: {\n    House,\n    User,\n    Coin,\n    Present,\n    ShoppingCart,\n    ArrowDown\n  },\n  setup() {\n    const router = useRouter();\n    const store = useStore();\n    const user = computed(() => store.state.user);\n    const handleCommand = command => {\n      switch (command) {\n        case 'profile':\n          router.push('/member/profile');\n          break;\n        case 'logout':\n          handleLogout();\n          break;\n      }\n    };\n    const handleLogout = () => {\n      store.dispatch('logout');\n      ElMessage.success('退出登录成功');\n      router.push('/login');\n    };\n    onMounted(() => {\n      // 检查用户角色\n      if (user.value?.role !== 'MEMBER') {\n        router.push('/login');\n      }\n    });\n    return {\n      user,\n      handleCommand\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","useRouter","useStore","ElMessage","House","User","Coin","Present","ShoppingCart","ArrowDown","name","components","setup","router","store","user","state","handleCommand","command","push","handleLogout","dispatch","success","value","role"],"sources":["/Users/libra520/JavaProject/repast-vip-system/frontend/src/layouts/MemberLayout.vue"],"sourcesContent":["<template>\n  <div class=\"member-layout\">\n    <el-container>\n      <!-- 侧边栏 -->\n      <el-aside width=\"200px\">\n        <div class=\"logo\">\n          <h3>会员中心</h3>\n        </div>\n        <el-menu\n          :default-active=\"$route.path\"\n          router\n          background-color=\"#304156\"\n          text-color=\"#bfcbd9\"\n          active-text-color=\"#409EFF\"\n        >\n          <el-menu-item index=\"/member/dashboard\">\n            <el-icon><House /></el-icon>\n            <span>仪表板</span>\n          </el-menu-item>\n          <el-menu-item index=\"/member/profile\">\n            <el-icon><User /></el-icon>\n            <span>个人资料</span>\n          </el-menu-item>\n          <el-menu-item index=\"/member/points\">\n            <el-icon><Coin /></el-icon>\n            <span>积分记录</span>\n          </el-menu-item>\n          <el-menu-item index=\"/member/exchange\">\n            <el-icon><Present /></el-icon>\n            <span>积分兑换</span>\n          </el-menu-item>\n          <el-menu-item index=\"/member/orders\">\n            <el-icon><ShoppingCart /></el-icon>\n            <span>消费记录</span>\n          </el-menu-item>\n        </el-menu>\n      </el-aside>\n\n      <!-- 主内容区 -->\n      <el-container>\n        <!-- 顶部导航 -->\n        <el-header>\n          <div class=\"header-left\">\n            <span class=\"welcome\">欢迎，{{ user?.username }}</span>\n          </div>\n          <div class=\"header-right\">\n            <el-dropdown @command=\"handleCommand\">\n              <span class=\"user-info\">\n                <el-avatar :size=\"32\" icon=\"User\" />\n                <span class=\"username\">{{ user?.username }}</span>\n                <el-icon><ArrowDown /></el-icon>\n              </span>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item command=\"profile\">个人资料</el-dropdown-item>\n                  <el-dropdown-item command=\"logout\" divided>退出登录</el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </el-header>\n\n        <!-- 主要内容 -->\n        <el-main>\n          <router-view />\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\nimport { House, User, Coin, Present, ShoppingCart, ArrowDown } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'MemberLayout',\n  components: {\n    House, User, Coin, Present, ShoppingCart, ArrowDown\n  },\n  setup() {\n    const router = useRouter()\n    const store = useStore()\n\n    const user = computed(() => store.state.user)\n\n    const handleCommand = (command) => {\n      switch (command) {\n        case 'profile':\n          router.push('/member/profile')\n          break\n        case 'logout':\n          handleLogout()\n          break\n      }\n    }\n\n    const handleLogout = () => {\n      store.dispatch('logout')\n      ElMessage.success('退出登录成功')\n      router.push('/login')\n    }\n\n    onMounted(() => {\n      // 检查用户角色\n      if (user.value?.role !== 'MEMBER') {\n        router.push('/login')\n      }\n    })\n\n    return {\n      user,\n      handleCommand\n    }\n  }\n}\n</script>\n\n<style scoped>\n.member-layout {\n  height: 100vh;\n}\n\n.el-container {\n  height: 100%;\n}\n\n.el-aside {\n  background-color: #304156;\n}\n\n.logo {\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #2b2f3a;\n  color: #fff;\n  margin-bottom: 10px;\n}\n\n.logo h3 {\n  margin: 0;\n  font-size: 18px;\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.el-header {\n  background-color: #fff;\n  border-bottom: 1px solid #e4e7ed;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n}\n\n.header-left .welcome {\n  color: #606266;\n  font-size: 14px;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  color: #606266;\n}\n\n.username {\n  font-size: 14px;\n}\n\n.el-main {\n  background-color: #f5f5f5;\n  padding: 20px;\n}\n</style>"],"mappings":"AAwEA,SAASA,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AACxC,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,cAAa;AACvC,SAASC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,OAAO,EAAEC,YAAY,EAAEC,SAAQ,QAAS,yBAAwB;AAE5F,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVP,KAAK;IAAEC,IAAI;IAAEC,IAAI;IAAEC,OAAO;IAAEC,YAAY;IAAEC;EAC5C,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIZ,SAAS,CAAC;IACzB,MAAMa,KAAI,GAAIZ,QAAQ,CAAC;IAEvB,MAAMa,IAAG,GAAIhB,QAAQ,CAAC,MAAMe,KAAK,CAACE,KAAK,CAACD,IAAI;IAE5C,MAAME,aAAY,GAAKC,OAAO,IAAK;MACjC,QAAQA,OAAO;QACb,KAAK,SAAS;UACZL,MAAM,CAACM,IAAI,CAAC,iBAAiB;UAC7B;QACF,KAAK,QAAQ;UACXC,YAAY,CAAC;UACb;MACJ;IACF;IAEA,MAAMA,YAAW,GAAIA,CAAA,KAAM;MACzBN,KAAK,CAACO,QAAQ,CAAC,QAAQ;MACvBlB,SAAS,CAACmB,OAAO,CAAC,QAAQ;MAC1BT,MAAM,CAACM,IAAI,CAAC,QAAQ;IACtB;IAEAnB,SAAS,CAAC,MAAM;MACd;MACA,IAAIe,IAAI,CAACQ,KAAK,EAAEC,IAAG,KAAM,QAAQ,EAAE;QACjCX,MAAM,CAACM,IAAI,CAAC,QAAQ;MACtB;IACF,CAAC;IAED,OAAO;MACLJ,IAAI;MACJE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}