{"ast":null,"code":"import { createStore } from 'vuex';\nimport axios from 'axios';\nexport default createStore({\n  state: {\n    user: null,\n    token: localStorage.getItem('token') || null\n  },\n  getters: {\n    isAuthenticated: function isAuthenticated(state) {\n      return !!state.token;\n    },\n    isAdmin: function isAdmin(state) {\n      return state.user && state.user.role === 'ADMIN';\n    },\n    isMember: function isMember(state) {\n      return state.user && state.user.role === 'MEMBER';\n    }\n  },\n  mutations: {\n    SET_USER: function SET_USER(state, user) {\n      state.user = user;\n    },\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n      if (token) {\n        localStorage.setItem('token', token);\n        axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(token);\n      } else {\n        localStorage.removeItem('token');\n        delete axios.defaults.headers.common['Authorization'];\n      }\n    }\n  },\n  actions: {\n    login: function login(_ref, _ref2) {\n      var commit = _ref.commit;\n      var token = _ref2.token,\n        user = _ref2.user;\n      commit('SET_TOKEN', token);\n      commit('SET_USER', user);\n    },\n    logout: function logout(_ref3) {\n      var commit = _ref3.commit;\n      commit('SET_TOKEN', null);\n      commit('SET_USER', null);\n    }\n  }\n});","map":{"version":3,"names":["createStore","axios","state","user","token","localStorage","getItem","getters","isAuthenticated","isAdmin","role","isMember","mutations","SET_USER","SET_TOKEN","setItem","defaults","headers","common","concat","removeItem","actions","login","_ref","_ref2","commit","logout","_ref3"],"sources":["/Users/libra520/JavaProject/repast-vip-system/frontend/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport axios from 'axios'\n\nexport default createStore({\n  state: {\n    user: null,\n    token: localStorage.getItem('token') || null\n  },\n  \n  getters: {\n    isAuthenticated: state => !!state.token,\n    isAdmin: state => state.user && state.user.role === 'ADMIN',\n    isMember: state => state.user && state.user.role === 'MEMBER'\n  },\n  \n  mutations: {\n    SET_USER(state, user) {\n      state.user = user\n    },\n    SET_TOKEN(state, token) {\n      state.token = token\n      if (token) {\n        localStorage.setItem('token', token)\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n      } else {\n        localStorage.removeItem('token')\n        delete axios.defaults.headers.common['Authorization']\n      }\n    }\n  },\n  \n  actions: {\n    login({ commit }, { token, user }) {\n      commit('SET_TOKEN', token)\n      commit('SET_USER', user)\n    },\n    \n    logout({ commit }) {\n      commit('SET_TOKEN', null)\n      commit('SET_USER', null)\n    }\n  }\n})"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,OAAO;AAEzB,eAAeD,WAAW,CAAC;EACzBE,KAAK,EAAE;IACLC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI;EAC1C,CAAC;EAEDC,OAAO,EAAE;IACPC,eAAe,EAAE,SAAjBA,eAAeA,CAAEN,KAAK;MAAA,OAAI,CAAC,CAACA,KAAK,CAACE,KAAK;IAAA;IACvCK,OAAO,EAAE,SAATA,OAAOA,CAAEP,KAAK;MAAA,OAAIA,KAAK,CAACC,IAAI,IAAID,KAAK,CAACC,IAAI,CAACO,IAAI,KAAK,OAAO;IAAA;IAC3DC,QAAQ,EAAE,SAAVA,QAAQA,CAAET,KAAK;MAAA,OAAIA,KAAK,CAACC,IAAI,IAAID,KAAK,CAACC,IAAI,CAACO,IAAI,KAAK,QAAQ;IAAA;EAC/D,CAAC;EAEDE,SAAS,EAAE;IACTC,QAAQ,WAARA,QAAQA,CAACX,KAAK,EAAEC,IAAI,EAAE;MACpBD,KAAK,CAACC,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDW,SAAS,WAATA,SAASA,CAACZ,KAAK,EAAEE,KAAK,EAAE;MACtBF,KAAK,CAACE,KAAK,GAAGA,KAAK;MACnB,IAAIA,KAAK,EAAE;QACTC,YAAY,CAACU,OAAO,CAAC,OAAO,EAAEX,KAAK,CAAC;QACpCH,KAAK,CAACe,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,aAAAC,MAAA,CAAaf,KAAK,CAAE;MACpE,CAAC,MAAM;QACLC,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;QAChC,OAAOnB,KAAK,CAACe,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;MACvD;IACF;EACF,CAAC;EAEDG,OAAO,EAAE;IACPC,KAAK,WAALA,KAAKA,CAAAC,IAAA,EAAAC,KAAA,EAA8B;MAAA,IAA3BC,MAAM,GAAAF,IAAA,CAANE,MAAM;MAAA,IAAMrB,KAAK,GAAAoB,KAAA,CAALpB,KAAK;QAAED,IAAI,GAAAqB,KAAA,CAAJrB,IAAI;MAC7BsB,MAAM,CAAC,WAAW,EAAErB,KAAK,CAAC;MAC1BqB,MAAM,CAAC,UAAU,EAAEtB,IAAI,CAAC;IAC1B,CAAC;IAEDuB,MAAM,WAANA,MAAMA,CAAAC,KAAA,EAAa;MAAA,IAAVF,MAAM,GAAAE,KAAA,CAANF,MAAM;MACbA,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC;MACzBA,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC;IAC1B;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}